"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1809],{91809:function(e,t,o){o.r(t),o.d(t,{CloseCode:function(){return r.CloseCode},DEPRECATED_GRAPHQL_WS_PROTOCOL:function(){return r.DEPRECATED_GRAPHQL_WS_PROTOCOL},GRAPHQL_TRANSPORT_WS_PROTOCOL:function(){return r.GRAPHQL_TRANSPORT_WS_PROTOCOL},MessageType:function(){return r.MessageType},createClient:function(){return i},isMessage:function(){return r.isMessage},parseMessage:function(){return r.parseMessage},stringifyMessage:function(){return r.stringifyMessage},validateMessage:function(){return r.validateMessage}});var r=o(72557),n=o(93943);function i(e){let t;let{url:o,connectionParams:i,lazy:a=!0,onNonLazyError:c=console.error,lazyCloseTimeout:l=0,keepAlive:p=0,disablePong:u,connectionAckWaitTimeout:y=0,retryAttempts:d=5,retryWait:g=async function(e){let t=1e3;for(let o=0;o<e;o++)t*=2;await new Promise(e=>setTimeout(e,t+Math.floor(2700*Math.random()+300)))},shouldRetry:f=s,isFatalConnectionProblem:m,on:b,webSocketImpl:C,generateID:h=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},jsonMessageReplacer:x,jsonMessageReviver:w}=e;if(C){if(!("function"==typeof C&&"constructor"in C&&"CLOSED"in C&&"CLOSING"in C&&"CONNECTING"in C&&"OPEN"in C))throw Error("Invalid WebSocket implementation provided");t=C}else"undefined"!=typeof WebSocket?t=WebSocket:"undefined"!=typeof global?t=global.WebSocket||global.MozWebSocket:"undefined"!=typeof window&&(t=window.WebSocket||window.MozWebSocket);if(!t)throw Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");let E=t,T=(()=>{let e=(()=>{let e={};return{on:(t,o)=>(e[t]=o,()=>{delete e[t]}),emit(t){var o;"id"in t&&(null===(o=e[t.id])||void 0===o||o.call(e,t))}}})(),t={connecting:(null==b?void 0:b.connecting)?[b.connecting]:[],opened:(null==b?void 0:b.opened)?[b.opened]:[],connected:(null==b?void 0:b.connected)?[b.connected]:[],ping:(null==b?void 0:b.ping)?[b.ping]:[],pong:(null==b?void 0:b.pong)?[b.pong]:[],message:(null==b?void 0:b.message)?[e.emit,b.message]:[e.emit],closed:(null==b?void 0:b.closed)?[b.closed]:[],error:(null==b?void 0:b.error)?[b.error]:[]};return{onMessage:e.on,on(e,o){let r=t[e];return r.push(o),()=>{r.splice(r.indexOf(o),1)}},emit(e,...o){for(let r of[...t[e]])r(...o)}}})();function R(e){let t=[T.on("error",o=>{t.forEach(e=>e()),e(o)}),T.on("closed",o=>{t.forEach(e=>e()),e(o)})]}let S,M=0,O,I=!1,P=0,v=!1;async function N(){clearTimeout(O);let[e,t]=await (null!=S?S:S=new Promise((e,t)=>(async()=>{let a,c;if(I){if(await g(P),!M)return S=void 0,t({code:1e3,reason:"All Subscriptions Gone"});P++}T.emit("connecting");let l=new E("function"==typeof o?await o():o,r.GRAPHQL_TRANSPORT_WS_PROTOCOL);function d(){isFinite(p)&&p>0&&(clearTimeout(c),c=setTimeout(()=>{l.readyState===E.OPEN&&(l.send((0,r.stringifyMessage)({type:r.MessageType.Ping})),T.emit("ping",!1,void 0))},p))}R(e=>{S=void 0,clearTimeout(a),clearTimeout(c),t(e),s(e)&&4499===e.code&&(l.close(4499,"Terminated"),l.onerror=null,l.onclose=null)}),l.onerror=e=>T.emit("error",e),l.onclose=e=>T.emit("closed",e),l.onopen=async()=>{try{T.emit("opened",l);let e="function"==typeof i?await i():i;if(l.readyState!==E.OPEN)return;l.send((0,r.stringifyMessage)(e?{type:r.MessageType.ConnectionInit,payload:e}:{type:r.MessageType.ConnectionInit},x)),isFinite(y)&&y>0&&(a=setTimeout(()=>{l.close(r.CloseCode.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")},y)),d()}catch(e){T.emit("error",e),l.close(r.CloseCode.InternalClientError,(0,n.qj)(e instanceof Error?e.message:Error(e).message,"Internal client error"))}};let f=!1;l.onmessage=({data:t})=>{try{let o=(0,r.parseMessage)(t,w);if(T.emit("message",o),"ping"===o.type||"pong"===o.type){T.emit(o.type,!0,o.payload),"pong"===o.type?d():u||(l.send((0,r.stringifyMessage)(o.payload?{type:r.MessageType.Pong,payload:o.payload}:{type:r.MessageType.Pong})),T.emit("pong",!1,o.payload));return}if(f)return;if(o.type!==r.MessageType.ConnectionAck)throw Error(`First message cannot be of type ${o.type}`);clearTimeout(a),f=!0,T.emit("connected",l,o.payload),I=!1,P=0,e([l,new Promise((e,t)=>R(t))])}catch(e){l.onmessage=null,T.emit("error",e),l.close(r.CloseCode.BadResponse,(0,n.qj)(e instanceof Error?e.message:Error(e).message,"Bad response"))}}})()));e.readyState===E.CLOSING&&await t;let a=()=>{},c=new Promise(e=>a=e);return[e,a,Promise.race([c.then(()=>{if(!M){let t=()=>e.close(1e3,"Normal Closure");isFinite(l)&&l>0?O=setTimeout(()=>{e.readyState===E.OPEN&&t()},l):t()}}),t])]}function $(e){var t;if(s(e)&&(![1e3,1001,1006,1005,1012,1013,1013].includes(t=e.code)&&t>=1e3&&t<=1999||[r.CloseCode.InternalServerError,r.CloseCode.InternalClientError,r.CloseCode.BadRequest,r.CloseCode.BadResponse,r.CloseCode.Unauthorized,r.CloseCode.SubprotocolNotAcceptable,r.CloseCode.SubscriberAlreadyExists,r.CloseCode.TooManyInitialisationRequests].includes(e.code)))throw e;if(v)return!1;if(s(e)&&1e3===e.code)return M>0;if(!d||P>=d||!f(e)||(null==m?void 0:m(e)))throw e;return I=!0}return a||(async()=>{for(M++;;)try{let[,,e]=await N();await e}catch(e){try{if(!$(e))return}catch(e){return null==c?void 0:c(e)}}})(),{on:T.on,subscribe(e,t){let o=h(e),n=!1,i=!1,s=()=>{M--,n=!0};return(async()=>{for(M++;;)try{let[a,c,l]=await N();if(n)return c();let p=T.onMessage(o,e=>{switch(e.type){case r.MessageType.Next:t.next(e.payload);return;case r.MessageType.Error:i=!0,n=!0,t.error(e.payload),s();return;case r.MessageType.Complete:n=!0,s();return}});a.send((0,r.stringifyMessage)({id:o,type:r.MessageType.Subscribe,payload:e},x)),s=()=>{n||a.readyState!==E.OPEN||a.send((0,r.stringifyMessage)({id:o,type:r.MessageType.Complete},x)),M--,n=!0,c()},await l.finally(p);return}catch(e){if(!$(e))return}})().then(()=>{i||t.complete()}).catch(e=>{t.error(e)}),()=>{n||s()}},async dispose(){if(v=!0,S){let[e]=await S;e.close(1e3,"Normal Closure")}},terminate(){S&&T.emit("closed",{code:4499,reason:"Terminated",wasClean:!1})}}}function s(e){return(0,n.Kn)(e)&&"code"in e&&"reason"in e}},72557:function(e,t,o){o.r(t),o.d(t,{CloseCode:function(){return i},DEPRECATED_GRAPHQL_WS_PROTOCOL:function(){return l},GRAPHQL_TRANSPORT_WS_PROTOCOL:function(){return c},MessageType:function(){return s},isMessage:function(){return u},parseMessage:function(){return y},stringifyMessage:function(){return d},validateMessage:function(){return p}});var r,n,i,s,a=o(93943);let c="graphql-transport-ws",l="graphql-ws";function p(e){if(!(0,a.Kn)(e))throw Error(`Message is expected to be an object, but got ${(0,a.IR)(e)}`);if(!e.type)throw Error("Message is missing the 'type' property");if("string"!=typeof e.type)throw Error(`Message is expects the 'type' property to be a string, but got ${(0,a.IR)(e.type)}`);switch(e.type){case s.ConnectionInit:case s.ConnectionAck:case s.Ping:case s.Pong:if("payload"in e&&!(0,a.Kn)(e.payload))throw Error(`"${e.type}" message expects the 'payload' property to be an object or missing, but got "${e.payload}"`);break;case s.Subscribe:if("string"!=typeof e.id)throw Error(`"${e.type}" message expects the 'id' property to be a string, but got ${(0,a.IR)(e.id)}`);if(!e.id)throw Error(`"${e.type}" message requires a non-empty 'id' property`);if(!(0,a.Kn)(e.payload))throw Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${(0,a.IR)(e.payload)}`);if("string"!=typeof e.payload.query)throw Error(`"${e.type}" message payload expects the 'query' property to be a string, but got ${(0,a.IR)(e.payload.query)}`);if(null!=e.payload.variables&&!(0,a.Kn)(e.payload.variables))throw Error(`"${e.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${(0,a.IR)(e.payload.variables)}`);if(null!=e.payload.operationName&&"string"!==(0,a.IR)(e.payload.operationName))throw Error(`"${e.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${(0,a.IR)(e.payload.operationName)}`);if(null!=e.payload.extensions&&!(0,a.Kn)(e.payload.extensions))throw Error(`"${e.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${(0,a.IR)(e.payload.extensions)}`);break;case s.Next:if("string"!=typeof e.id)throw Error(`"${e.type}" message expects the 'id' property to be a string, but got ${(0,a.IR)(e.id)}`);if(!e.id)throw Error(`"${e.type}" message requires a non-empty 'id' property`);if(!(0,a.Kn)(e.payload))throw Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${(0,a.IR)(e.payload)}`);break;case s.Error:if("string"!=typeof e.id)throw Error(`"${e.type}" message expects the 'id' property to be a string, but got ${(0,a.IR)(e.id)}`);if(!e.id)throw Error(`"${e.type}" message requires a non-empty 'id' property`);if(!(0,a.Ox)(e.payload))throw Error(`"${e.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(e.payload)}`);break;case s.Complete:if("string"!=typeof e.id)throw Error(`"${e.type}" message expects the 'id' property to be a string, but got ${(0,a.IR)(e.id)}`);if(!e.id)throw Error(`"${e.type}" message requires a non-empty 'id' property`);break;default:throw Error(`Invalid message 'type' property "${e.type}"`)}return e}function u(e){try{return p(e),!0}catch(e){return!1}}function y(e,t){return p("string"==typeof e?JSON.parse(e,t):e)}function d(e,t){return p(e),JSON.stringify(e,t)}(r=i||(i={}))[r.InternalServerError=4500]="InternalServerError",r[r.InternalClientError=4005]="InternalClientError",r[r.BadRequest=4400]="BadRequest",r[r.BadResponse=4004]="BadResponse",r[r.Unauthorized=4401]="Unauthorized",r[r.Forbidden=4403]="Forbidden",r[r.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",r[r.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",r[r.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",r[r.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",r[r.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests",(n=s||(s={})).ConnectionInit="connection_init",n.ConnectionAck="connection_ack",n.Ping="ping",n.Pong="pong",n.Subscribe="subscribe",n.Next="next",n.Error="error",n.Complete="complete"},93943:function(e,t,o){function r(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function n(e){return"object"===r(e)}function i(e){return"function"==typeof Object(e)[Symbol.asyncIterator]}function s(e){return n(e)&&"function"==typeof Object(e)[Symbol.asyncIterator]&&"function"==typeof e.return}function a(e){return Array.isArray(e)&&e.length>0&&e.every(e=>"message"in e)}function c(e,t){return e.length<124?e:t}o.d(t,{D0:function(){return i},IR:function(){return r},Jy:function(){return s},Kn:function(){return n},Ox:function(){return a},qj:function(){return c}})}}]);